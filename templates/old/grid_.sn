<!DOCTYPE html>
{{ 
	use lg;			// Function publish use context lg
	use page;		// Function publish use context page for the content of the page
	use user;		// From sn_preload
	use grid;		// In sn_publish grid is initialize 

	%include "/extenso/functions/sn_widgets.snc"; 
}}
\{{ 
	config=config(); 
	page={"uid":"{{page.rows.uid}}",
		"url":"{{page.rows{'folder_' .+ lg.rows.lg}; 
		page.rows{'page_' .+ lg.rows.lg};}}"}; // use by menus
}}
<html lang="{{lg.rows.lg}}">
    <head>
		{{ %include "/includes/header.sn"; }}
		<!-- Generated by {{ 
				user.username; " " ; datetime();  " "; 
				files = filenames(); 
				for file in files.filenames do 
					file; " ;  "; 
					endfor 
		}} -->
    </head>
    <body class="site">
		\{{ 
			if config.site eq "staging" then 
				client_has_bootstrap = true; 
				if user.lg ne "" then
					include("/extenso/html/extranet/" .+ user.lg .+ "/fullpage.snc");
				else
					include("/extenso/html/extranet/fr/fullpage.snc"); 
				endif
			endif
		}}
		<div class="cs sed">
			\{{ include("/" .+ config.site .+ "/includes/{{lg.rows.lg}}/header.snc"); }}
			
				<div class="container-fluid">
				{{ // ----------------------------- Implement Grid

					row_number = 0;
					col_number = 0;
					grid = unstringnify(grid.rows.grid);
					for row in grid.grid do 
						row_number++;
						}}
						<div class="row">
							{{ for col in row do 
								col_number++;
								content = sql(single:true,"select * from sn_template_grid_content where uid_page = '?' and row='?' and col='?'", page.rows.uid, row_number, col_number); 
								if content.nbrows == 0 then
									void insert(table:"sn_template_grid_content",user:user,fields:{"uid_page":page.rows.uid,"row":row_number,"col":col_number});
									content = sql(single:true,"select * from sn_template_grid_content where uid_page = '?' and row='?' and col='?'", page.rows.uid, row_number, col_number); 
								endif
								}}
							<div class="sn_pencil col-md-{{col}}" 
								data-sn_link1="/extenso/extranet/sn_template_grid_content/{{lg.rows.lg}}/edit.snc?uid={{content.rows.uid}}&sn_uniq=yes&sn_modal=t" 
								data-sn_class1="edit" data-sn_title1="Edit">{{ 
								}}
								<h1>{{content.rows{"titre_" .+ lg.rows.lg}; }}</h1>
								{{content.rows{"texte_" .+ lg.rows.lg}; }}
								{{ sn_widgets(add:true,table:"pages",uid:page.rows.uid,lg:lg,position:"grid-" .+ row_number .+ col_number); }}
								</div>
							{{ endfor }}
						</div><!--/.row-->
					{{ endfor
				}}
			</div><!--/.container-->
			
			\{{ include("/" .+ config.site .+ "/includes/{{lg.rows.lg}}/footer.snc"); }}
		</div><!--/.cs-->
		{{ %include "/includes/footer.sn"; }}
    </body>
</html>